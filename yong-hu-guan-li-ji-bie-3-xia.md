# 用户管理（级别3下）

#### 创建用户指定密码

Linux系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都要先向系统管理员申请一个账号，然后以这个账号登录系统，针对多个用户，采用“用户组”的方式进行管理，一个Linux账号至少属于一个组。

添加用户语法：`useradd 用户名`

* 当创建用户成功后，会自动创建和用户同名的家目录。
* 可以通过 `useradd -d`指定目录、新的用户名、指定家目录。

指定用户密码语法：`passwd 用户名`

用户家目录：/home/目录下有各个创建的用户对应的家目录，当用户登录时，会自动进入到自己的家目录下。

使用`useradd`时，如果后面不添加任何参数选项，创建出来的用户将是默认“三无”用户。一无home目录，二无密码，三无shell。 如果一定要用`useradd`添加用户时，在后面添加`-m`参数，强制创建家目录。或者使用 `adduser`，创建用户的过程中，系统会提示输入各种信息，然后会根据这些信息创建新用户 。

#### 删除用户

删除用户语法：`userdel 用户名`（在root状态下）

```text
userdel 用户名：删除了用户，但用户的家目录还在
​
userdel -r 用户名：删除用户及其家目录，一般情况下最好保留家目录
```

#### 查询、切换目录

**查询用户信息**

```text
id 用户名 
会产生以下三个信息
uid gid 组
分别代表：用户id号、所在组的id号、所在的组名
```

**切换用户**

如果当前用户的权限不够，可以使用`su -切换用户名`，切换到高权限用户。从权限高的用户切换到权限低的用户，不需要输入密码，反之需要。当需要返回到原来的用户时，使用`exit`指令。

#### 组的管理

**用户组**

类似于角色，系统可以对有共性的多个用户进行统一的管理。

增加组：`groupadd 组名`

删除组：`groupdel 组名`

增加用户时直接加上组：`useradd -g 用户组 用户名`

修改用户组：`usermod -g 用户组 用户名`

#### 用户和组的配置文件

**/etc/passwd 文件**

用户的配置文件，记录用户的各种信息。

每行的含义：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录shell

**/etc/shadow 文件**

密码的配置文件

每行的含义：登录名:加密密码:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标识

**/etc/group 文件**

组的配置文件，记录Linux包含的组的信息

每行含义：组名:口令:组标识号:组内用户列表

#### 运行级别和找回root密码

**运行级别**

系统的运行级别配置文件 `/etc/inittab`

基本语法：`init [012356]`\(无方括号\)

```text
运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动 
运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆 
运行级别2：多用户状态(没有NFS) 
运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式 
运行级别4：系统未使用，保留 
运行级别5：X11控制台，登陆后进入图形GUI模式 
运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动
```

以上部分命令适用于redhat系系统。Linux系统，主要分debian系和redhat系，还有其它自由的发布版本。

1、debian系主要有Debian，Ubuntu，Mint等及其衍生版本。

2、redhat系主要有RedHat，Fedora，CentOS等。

在Ubuntu中没有`/etc/inittab`文件，使用`runlevel`命令可直接查看系统运行级别，使用`telinit [012356]`或`init [012356]`切换运行级别。

**找回root密码**

先以单用户模式登录（runlevel 1），然后修改root密码，进入单用户模式时不需要密码就可以登录。此过程仅在系统所在的电脑上可使用，不能在远程登录情况修改密码，这也保证了用户的安全性。

不同版本的Linux进入单用户模式不太一样，Ubuntu的具体过程见[Ubuntu进入单用户模式修改密码](https://blog.csdn.net/qq_40146082/article/details/98847504)

